generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./my_music.db"
}

model Song {
  id       Int            @id @default(autoincrement())
  name     String
  artist   Artist?        @relation(fields: [artistId], references: [id])
  artistId Int?
  users    UserPlaylist[]

}

model Artist {
  id    Int    @id @default(autoincrement())
  name  String
  songs Song[]

}

model User {
  id              Int            @id @default(autoincrement())
  username        String
  email           String
  password        String
  playlist        UserPlaylist[]
  friends         UserFriends[]  @relation("friend")
  friendsRelation UserFriends[]  @relation("friendRelation")
}

model UserFriends {
  friend                   User    @relation("friend", fields: [friendId], references: [id])
  friendId                 Int
  friendRelation           User    @relation("friendRelation", fields: [friendRelationId], references: [id])
  friendRelationId         Int
  isFriendRequestConfirmed Boolean

  @@id([friendId, friendRelationId])
}

model UserPlaylist {
  user   User @relation(fields: [userId], references: [id])
  userId Int
  song   Song @relation(fields: [songId], references: [id])
  songId Int

  @@id([userId, songId])
}
